openapi: 3.0.0
info:
  title: Apex Logistics Master API
  description: Unified access to Apex Inventory, Vendor Risk, and Policy Data with unit prices for policy-compliant ordering.
  version: 1.1.0

servers:
  - url: https://agentic-ai-hackathon-with-ibm-watso.vercel.app/

paths:
  /:
    get:
      operationId: getOperationalData
      summary: Get Operational Data
      description: Fetches inventory (with unit prices), vendor risk profiles, and policy thresholds.
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  inventory:
                    type: array
                    items:
                      type: object
                      properties:
                        product: { type: string }
                        warehouse: { type: string }
                        stock_level: { type: integer }
                        reorder_threshold: { type: integer }
                        status: { type: string }
                        unit_price: { type: number }
                      required:
                        - product
                        - warehouse
                        - stock_level
                        - reorder_threshold
                        - status
                        - unit_price
                    example:
                      - product: Solar Panels
                        warehouse: Douala Central
                        stock_level: 120
                        reorder_threshold: 100
                        status: Sufficient
                        unit_price: 150
                      - product: Battery Packs
                        warehouse: Douala Central
                        stock_level: 45
                        reorder_threshold: 50
                        status: Below threshold
                        unit_price: 40
                      - product: Smart Meters
                        warehouse: Douala Central
                        stock_level: 200
                        reorder_threshold: 150
                        status: Sufficient
                        unit_price: 60
                      - product: LED Bulbs
                        warehouse: Douala Central
                        stock_level: 80
                        reorder_threshold: 75
                        status: Sufficient
                        unit_price: 5

                  vendors:
                    type: array
                    items:
                      type: object
                      properties:
                        name: { type: string }
                        region: { type: string }
                        risk_rating: { type: string }
                        preferred_language: { type: string }
                        last_delivery_status: { type: string }
                        incidents:
                          type: array
                          items:
                            type: object
                            properties:
                              date: { type: string, format: date }
                              issue: { type: string }
                              resolution: { type: string }
                        sustainability:
                          type: object
                          properties:
                            waste_compliance_percent: { type: integer }
                            sdg9_alignment: { type: string }
                            audit_score: { type: string }
                    example:
                      - name: EcoSupply Ltd.
                        region: Northern Cameroon
                        risk_rating: Low
                        preferred_language: Fulfulde
                        last_delivery_status: On time
                        incidents:
                          - date: 2025-06-18
                            issue: Incorrect packaging format
                            resolution: Auto-alert triggered; resolved in 24h
                        sustainability:
                          waste_compliance_percent: 98
                          sdg9_alignment: Strong
                          audit_score: A
                      - name: NovaTrade Inc.
                        region: Lagos, Nigeria
                        risk_rating: Medium
                        preferred_language: English
                        last_delivery_status: Delayed by 4 days
                        incidents:
                          - date: 2025-08-12
                            issue: Shipment delayed by 4 days
                            resolution: Reallocated from Douala warehouse
                        sustainability:
                          waste_compliance_percent: 85
                          sdg9_alignment: Moderate
                          audit_score: B
                      - name: SolaTech SARL
                        region: Yaoundé, Cameroon
                        risk_rating: High
                        preferred_language: French
                        last_delivery_status: On time
                        incidents:
                          - date: 2025-07-03
                            issue: Missing sustainability report
                            resolution: Escalated to compliance manager
                        sustainability:
                          waste_compliance_percent: 60
                          sdg9_alignment: Weak
                          audit_score: C

                  policy:
                    type: object
                    properties:
                      approval_thresholds:
                        type: array
                        items:
                          type: object
                          properties:
                            range: { type: string }
                            approval_level: { type: string }
                            approvers: { type: array, items: { type: string } }
                        example:
                          - range: "< $5,000"
                            approval_level: Auto-approved
                            approvers: []
                          - range: "$5,000–$20,000"
                            approval_level: Procurement review
                            approvers: ["Procurement Officer"]
                          - range: "> $20,000"
                            approval_level: Dual approval
                            approvers: ["Finance", "Procurement"]
                      contract_terms:
                        type: object
                        properties:
                          vendor_name: { type: string }
                          delivery_sla_days: { type: integer }
                          penalty_percent: { type: number }
                          escalation_steps: { type: array, items: { type: string } }
                        example:
                          vendor_name: TransGlobal Freight Ltd.
                          delivery_sla_days: 7
                          penalty_percent: 2
                          escalation_steps:
                            - Alert Procurement Officer
                            - Escalate to Compliance Manager after 48h

                  multilingual_alerts:
                    type: object
                    properties:
                      English:
                        type: object
                        properties:
                          subject: { type: string }
                          message: { type: string }
                      French:
                        type: object
                        properties:
                          subject: { type: string }
                          message: { type: string }
                      Hausa:
                        type: object
                        properties:
                          subject: { type: string }
                          message: { type: string }
                      Fulfulde:
                        type: object
                        properties:
                          subject: { type: string }
                          message: { type: string }
                    example:
                      English:
                        subject: Shipment Delay Alert
                        message: Your shipment is delayed. Apex will reallocate inventory to minimize impact.
                      French:
                        subject: Alerte de retard d’expédition
                        message: Votre expédition est retardée. Apex réaffectera les stocks pour limiter l’impact.
                      Hausa:
                        subject: Jinkirin jigilar kaya
                        message: Jigilarku ta jinkirta. Apex zai sake rarraba kaya don rage tasiri.
                      Fulfulde:
                        subject: Jokkondirde jiggirde
                        message: Jiggirde maa jokkondirde. Apex ena waawi jokkondirde stock ngam waɗde fayde.
  /order-check:
    get:
      operationId: checkOrderPolicy
      summary: Check policy compliance for a proposed order
      description: >
        Calculates total cost of a proposed order and returns the required approval level
        based on Apex's procurement policy thresholds.
      parameters:
        - name: product
          in: query
          required: true
          schema:
            type: string
          description: Name of the product to order
        - name: quantity
          in: query
          required: true
          schema:
            type: integer
          description: Quantity of the product to order
      responses:
        '200':
          description: Policy decision for proposed order
          content:
            application/json:
              schema:
                type: object
                properties:
                  product: { type: string }
                  unit_price: { type: number }
                  quantity: { type: integer }
                  total_cost: { type: number }
                  policy_decision:
                    type: object
                    properties:
                      level: { type: string }
                      approvers:
                        type: array
                        items: { type: string }
